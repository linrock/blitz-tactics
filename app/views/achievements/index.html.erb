<% content_for(:title) { "Achievements" } %>

<div class="user-puzzle-indicator">
  <div class="container">
    <div class="puzzle-count-display adventure-mode-disabled">
      <div class="puzzle-count-group">
        <span class="puzzle-count-label">You've solved</span>
        <span class="puzzle-count-number"><%= @solved_puzzles_count %></span>
        <span class="puzzle-count-label">unique puzzles</span>
      </div>
    </div>
  </div>
</div>

<div class="achievements-page">
  <div class="container">
    <header>
      <h1>Achievements</h1>
      <p class="subtitle">Track your progress and unlock new milestones</p>
      <div class="achievement-stats">
        <div class="stat">
          <span class="stat-number"><%= @unlocked_count %></span>
          <span class="stat-label">Unlocked</span>
        </div>
      </div>
    </header>
  </div>

  <div class="container">
    <div class="achievements-grid">
      <!-- PUZZLE SOLVING ACHIEVEMENTS -->
      <div class="achievement-category puzzle-solving">
        <h2>ğŸ§© PUZZLE SOLVING ACHIEVEMENTS</h2>
        <p class="category-description">Track your progress as you solve more puzzles</p>
        
        <div class="achievement-list">
          <% @puzzle_achievements.each do |achievement| %>
            <% 
              # Show all achievements, but hide details for locked ones
              status_class = if achievement[:unlocked]
                'unlocked'
              elsif achievement[:is_next_achievement]
                'in-progress'
              else
                'locked'
              end
            %>
            <div class="achievement <%= status_class %>">
              <div class="achievement-icon">
                <% if achievement[:unlocked] %>
                  âœ…
                <% elsif achievement[:is_next_achievement] %>
                  â³
                <% else %>
                  ğŸ”’
                <% end %>
              </div>
              <div class="achievement-content">
                <% if achievement[:unlocked] %>
                  <div class="achievement-title">
                    <%= achievement[:tier][:title] %> (<%= achievement[:tier][:count].to_s.reverse.gsub(/(\d{3})(?=.)/, '\1,').reverse %> puzzles)
                  </div>
                  <div class="achievement-description">Unlocked!</div>
                <% elsif achievement[:is_next_achievement] %>
                  <div class="achievement-title">
                    <%= achievement[:tier][:title] %> (<%= achievement[:tier][:count].to_s.reverse.gsub(/(\d{3})(?=.)/, '\1,').reverse %> puzzles)
                  </div>
                  <div class="achievement-progress">
                    <div class="progress-bar">
                      <div class="progress-fill" style="width: <%= achievement[:progress_percentage] %>%"></div>
                    </div>
                    <div class="progress-text">
                      <%= achievement[:current_count] %>/<%= achievement[:tier][:count] %> puzzles 
                      (<%= achievement[:progress_percentage] %>% - <%= achievement[:remaining_count] %> more to go)
                    </div>
                  </div>
                <% else %>
                  <div class="achievement-title">Hidden Achievement</div>
                  <div class="achievement-description">Keep solving puzzles to reveal what's next</div>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      </div>

      <% if @show_placeholder_sections %>
      <!-- TIER 1: Foundation Achievements -->
      <div class="achievement-category tier-1">
        <h2>ğŸš€ TIER 1 - FOUNDATION</h2>
        <p class="category-description">Essential milestones for new players</p>
        
        <div class="achievement-list">
          <div class="achievement in-progress">
            <div class="achievement-icon">â³</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ¯ Sharp Eye (7/10 correct in a row)</div>
              <div class="achievement-progress">
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 70%"></div>
                </div>
                <div class="progress-text">7/10 correct</div>
              </div>
            </div>
          </div>
          
          <div class="achievement unlocked">
            <div class="achievement-icon">âœ…</div>
            <div class="achievement-content">
              <div class="achievement-title">âœ¨ Flawless (Perfect game mode session)</div>
              <div class="achievement-description">Unlocked Mar 12</div>
            </div>
          </div>
          
          <div class="achievement unlocked">
            <div class="achievement-icon">âœ…</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ”¥ Daily Solver (7 days in a row)</div>
              <div class="achievement-description">Unlocked Mar 10</div>
            </div>
          </div>
          
          <div class="achievement in-progress">
            <div class="achievement-icon">â³</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ”¥ Committed (23/30 days in a row)</div>
              <div class="achievement-progress">
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 76.7%"></div>
                </div>
                <div class="progress-text">23/30 days</div>
              </div>
            </div>
          </div>
          
          <div class="achievement unlocked">
            <div class="achievement-icon">âœ…</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ—ºï¸ Explorer (Try all 7 game modes)</div>
              <div class="achievement-description">Unlocked Mar 14</div>
            </div>
          </div>
        </div>
      </div>

      <!-- TIER 2: Skill Development -->
      <div class="achievement-category tier-2">
        <h2>âš¡ TIER 2 - SKILL DEVELOPMENT</h2>
        <p class="category-description">Master the fundamentals and build expertise</p>
        
        <div class="achievement-list">
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ¯ Precision (25 correct in a row)</div>
              <div class="achievement-description">Get 25 puzzles correct in a row</div>
            </div>
          </div>
          
          <div class="achievement unlocked">
            <div class="achievement-icon">âœ…</div>
            <div class="achievement-content">
              <div class="achievement-title">âš¡ Lightning (< 3 seconds)</div>
              <div class="achievement-description">Unlocked Mar 12</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">âš¡ Speed Demon (< 5 sec average over 20)</div>
              <div class="achievement-description">Maintain 5 second average over 20 puzzles</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸš€ Haste Hero (15+ combo streak)</div>
              <div class="achievement-description">Reach a 15+ combo streak in Haste mode</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ¯ Three's Mastery (Zero hints)</div>
              <div class="achievement-description">Complete Three mode using zero hints</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">â° Countdown Crusher (Level 10)</div>
              <div class="achievement-description">Reach level 10 in Countdown mode</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ”¥ Dedicated (100 days in a row)</div>
              <div class="achievement-description">Solve puzzles 100 days in a row</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ“Œ Pin Master (50 pin puzzles)</div>
              <div class="achievement-description">Solve 50 pin-themed puzzles</div>
            </div>
          </div>
        </div>
      </div>

      <!-- TIER 3: Advanced Mastery -->
      <div class="achievement-category tier-3">
        <h2>ğŸ‘‘ TIER 3 - ADVANCED MASTERY</h2>
        <p class="category-description">Elite achievements for dedicated players</p>
        
        <div class="achievement-list">
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ’ Perfectionist (100 correct in a row)</div>
              <div class="achievement-description">Get 100 puzzles correct in a row</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">â±ï¸ Time Attack (Haste under 2 minutes)</div>
              <div class="achievement-description">Complete Haste mode in under 2 minutes</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">â­ Rating Warrior (1400+ rating)</div>
              <div class="achievement-description">Achieve 1400+ rating in Rated mode</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ´ Fork Specialist (50 fork puzzles)</div>
              <div class="achievement-description">Solve 50 fork-themed puzzles</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">â™Ÿï¸ Endgame Expert (100 endgame puzzles)</div>
              <div class="achievement-description">Solve 100 endgame puzzles</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ† Daily Champion (#1 daily high score)</div>
              <div class="achievement-description">Get #1 daily high score in any mode</div>
            </div>
          </div>
          
          <div class="achievement locked">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">ğŸ¦‰ Night Owl (25 puzzles after 10 PM)</div>
              <div class="achievement-description">Solve 25 puzzles after 10 PM</div>
            </div>
          </div>
        </div>
      </div>

      <!-- MYSTERY ACHIEVEMENTS -->
      <div class="achievement-category mystery">
        <h2>â“ MYSTERY ACHIEVEMENTS</h2>
        <p class="category-description">Hidden secrets waiting to be discovered</p>
        
        <div class="achievement-list">
          <div class="achievement locked mystery">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">??? - Early Bird</div>
              <div class="achievement-description">Keep playing to discover this secret!</div>
            </div>
          </div>
          
          <div class="achievement locked mystery">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">??? - Perfect Timing</div>
              <div class="achievement-description">Keep playing to discover this secret!</div>
            </div>
          </div>
          
          <div class="achievement locked mystery">
            <div class="achievement-icon">ğŸ”’</div>
            <div class="achievement-content">
              <div class="achievement-title">??? - Lucky Number</div>
              <div class="achievement-description">Keep playing to discover this secret!</div>
            </div>
          </div>
        </div>
      </div>
      <% end %>
    </div>
  </div>
</div>

<% unless user_signed_in? %>
<div class="achievements-cta">
  <div class="container">
    <div class="cta-content">
      <h2>Ready to start your puzzle journey?</h2>
      <p>Sign up to track your progress and unlock achievements</p>
      <a href="<%= https_registration_url %>" class="cta-button">
        <svg><use xlink:href="#sign-in"/></svg>
        <span>Sign up for free</span>
      </a>
    </div>
  </div>
</div>
<% end %>

<%= render 'shared/main_footer' %>
